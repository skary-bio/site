<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ü–æ—Ö–æ–¥ –∑–∞ –ö–æ—Å–º–æ–ë—É—Ä–≥–µ—Ä–∞–º–∏ üçî</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    canvas {
      border: 3px solid #ff3399;
      background: url('https://via.placeholder.com/800x600/000022?text=–ö–æ—Å–º–æ—Å');
    }
    .neon-text {
      text-shadow: 0 0 5px #ff3399, 0 0 10px #33ffcc;
    }
    .pulse:hover {
      animation: pulse 0.3s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center">
  <h1 class="text-5xl neon-text my-4">–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ü–æ—Ö–æ–¥ –∑–∞ –ö–æ—Å–º–æ–ë—É—Ä–≥–µ—Ä–∞–º–∏ üçî</h1>
  <div class="flex w-full max-w-5xl">
    <!-- üìã –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ -->
    <div class="w-1/5 p-4 bg-gray-800 rounded-lg">
      <h2 class="text-2xl neon-text">–õ–∏–¥–µ—Ä—ã üèÜ</h2>
      <ul id="leaderboard">
        <li class="text-yellow-400">1. –ë—É—Ä–≥–µ—Ä–ú–µ–Ω: 0 üçî</li>
        <li class="text-gray-400">2. –ö–æ—Å–º–æ–ö–æ—Ä–æ–≤–∞: 0 üçî</li>
        <li class="text-gray-400">3. –£–Ω–∏—Ç–∞–∑–Ω–∏–∫: 0 üçî</li>
      </ul>
    </div>
    <!-- üéÆ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ -->
    <div class="w-3/5">
      <canvas id="gameCanvas" width="800" height="600"></canvas>
      <div class="flex justify-between mt-2">
        <div>–ë—É—Ä–≥–µ—Ä—ã: <span id="burgers">0</span> üçî</div>
        <div>–í—Ä–µ–º—è: <span id="timer">3:00</span> ‚è±Ô∏è</div>
        <div>–ó–¥–æ—Ä–æ–≤—å–µ: <span id="health">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></div>
      </div>
    </div>
    <!-- üëú –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –°–∫–∏–Ω—ã -->
    <div class="w-1/5 p-4 bg-gray-800 rounded-lg">
      <h2 class="text-2xl neon-text">–°–∫–∏–Ω—ã üé®</h2>
      <button id="skinBtn" class="bg-pink-500 hover:bg-pink-700 pulse text-white font-bold py-2 px-4 rounded w-full">–°–º–µ–Ω–∏—Ç—å —Å–∫–∏–Ω üöÄ</button>
    </div>
  </div>
  <!-- üõ†Ô∏è –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å: –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ -->
  <div class="mt-4 flex space-x-4">
    <button id="magnetBtn" class="bg-blue-500 hover:bg-blue-700 pulse text-white font-bold py-2 px-4 rounded">–ë—É—Ä–≥–µ—Ä–Ω—ã–π –ú–∞–≥–Ω–∏—Ç üß≤</button>
    <button id="shieldBtn" class="bg-blue-500 hover:bg-blue-700 pulse text-white font-bold py-2 px-4 rounded">–¢—É–∞–ª–µ—Ç–Ω—ã–π –©–∏—Ç üõ°Ô∏è</button>
    <button id="cowBtn" class="bg-blue-500 hover:bg-blue-700 pulse text-white font-bold py-2 px-4 rounded">–ö–æ—Ä–æ–≤—è—á–∏–π –†–µ–≤ üêÑ</button>
  </div>

  <script>
    // üé® –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const burgersDisplay = document.getElementById('burgers');
    const timerDisplay = document.getElementById('timer');
    const healthDisplay = document.getElementById('health');
    const magnetBtn = document.getElementById('magnetBtn');
    const shieldBtn = document.getElementById('shieldBtn');
    const cowBtn = document.getElementById('cowBtn');
    const skinBtn = document.getElementById('skinBtn');

    // üöÄ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    let player = {
      x: 400, y: 300, speed: 5, burgers: 0, health: 3,
      skin: 'üöÄ', isDancing: false, shield: false
    };
    let burgers = [];
    let toilets = [];
    let cows = [];
    let gameTime = 180; // 3 –º–∏–Ω—É—Ç—ã
    let discoTimer = 0;
    let skins = ['üöÄ', 'üçî', 'üöΩ', 'üêÑ'];

    // üçî –°–æ–∑–¥–∞–Ω–∏–µ –±—É—Ä–≥–µ—Ä–æ–≤
    function spawnBurger() {
      burgers.push({
        x: Math.random() * 780 + 10,
        y: Math.random() * 580 + 10
      });
    }

    // üöΩ –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω—ñ—Ç–∞–∑—ñ–≤
    function spawnToilet() {
      toilets.push({
        x: Math.random() * 780 + 10,
        y: Math.random() * 580 + 10,
        paper: []
      });
    }

    // üêÑ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ–≤
    function spawnCow() {
      cows.push({
        x: Math.random() * 780 + 10,
        y: Math.random() * 580 + 10
      });
    }

    // üéÆ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä—ã
    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // üöÄ –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
      if (!player.isDancing) {
        if (keys.ArrowUp) player.y = Math.max(10, player.y - player.speed);
        if (keys.ArrowDown) player.y = Math.min(590, player.y + player.speed);
        if (keys.ArrowLeft) player.x = Math.max(10, player.x - player.speed);
        if (keys.ArrowRight) player.x = Math.min(790, player.x + player.speed);
      } else {
        player.x += Math.sin(Date.now() / 100) * 2; // –¢–∞–Ω–µ—Ü
      }

      // üçî –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –±—É—Ä–≥–µ—Ä–æ–≤
      burgers.forEach((burger, i) => {
        ctx.font = '30px Arial';
        ctx.fillText('üçî', burger.x, burger.y);
        if (Math.hypot(player.x - burger.x, player.y - burger.y) < 30) {
          player.burgers++;
          burgers.splice(i, 1);
          burgersDisplay.textContent = player.burgers;
        }
      });

      // üöΩ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —É–Ω–∏—Ç–∞–∑–æ–≤ –∏ —Ä—É–ª–æ–Ω–æ–≤
      toilets.forEach(toilet => {
        ctx.font = '30px Arial';
        ctx.fillText('üöΩ', toilet.x, toilet.y);
        if (Math.random() < 0.02) {
          toilet.paper.push({
            x: toilet.x, y: toilet.y,
            dx: (player.x - toilet.x) / 100,
            dy: (player.y - toilet.y) / 100
          });
        }
        toilet.paper.forEach((paper, i) => {
          ctx.fillText('üßª', paper.x, paper.y);
          paper.x += paper.dx;
          paper.y += paper.dy;
          if (Math.hypot(player.x - paper.x, player.y - paper.y) < 20 && !player.shield) {
            player.health--;
            healthDisplay.textContent = '‚ù§Ô∏è'.repeat(player.health);
            toilet.paper.splice(i, 1);
            if (player.health <= 0) alert('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –¢—ã —Å–æ–±—Ä–∞–ª ' + player.burgers + ' –±—É—Ä–≥–µ—Ä–æ–≤ üçî');
          }
        });
      });

      // üêÑ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ—Ä–æ–≤ –∏ –¥–∏—Å–∫–æ
      cows.forEach(cow => {
        ctx.font = '30px Arial';
        ctx.fillText('üêÑ', cow.x, cow.y);
        if (Math.random() < 0.005) {
          discoTimer = 5 * 60; // 5 —Å–µ–∫—É–Ω–¥
          player.isDancing = true;
        }
      });

      // ‚è±Ô∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
      gameTime--;
      timerDisplay.textContent = `${Math.floor(gameTime / 60)}:${(gameTime % 60).toString().padStart(2, '0')}`;
      if (gameTime <= 0) {
        alert('–ú–∞—Ç—á –æ–∫–æ–Ω—á–µ–Ω! –¢—ã —Å–æ–±—Ä–∞–ª ' + player.burgers + ' –±—É—Ä–≥–µ—Ä–æ–≤ üçî');
        gameTime = 180;
        player.burgers = 0;
        player.health = 3;
        burgers = [];
        toilets = [];
        cows = [];
      }

      // üï∫ –î–∏—Å–∫–æ-—à—Ç–æ—Ä–º
      if (discoTimer > 0) {
        discoTimer--;
        ctx.fillStyle = `hsl(${Date.now() % 360}, 100%, 50%)`;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = 'white';
        if (discoTimer === 0) player.isDancing = false;
      }

      // üöÄ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞
      ctx.font = '30px Arial';
      ctx.fillText(player.skin, player.x, player.y);

      // üçî –°–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤
      if (Math.random() < 0.05) spawnBurger();
      if (Math.random() < 0.01) spawnToilet();
      if (Math.random() < 0.005) spawnCow();

      requestAnimationFrame(update);
    }

    // üéπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    let keys = {};
    document.addEventListener('keydown', e => keys[e.key] = true);
    document.addEventListener('keyup', e => keys[e.key] = false);

    // üß≤ –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
    magnetBtn.addEventListener('click', () => {
      burgers.forEach(burger => {
        burger.x = player.x;
        burger.y = player.y;
      });
    });

    shieldBtn.addEventListener('click', () => {
      player.shield = true;
      setTimeout(() => player.shield = false, 5000);
    });

    cowBtn.addEventListener('click', () => {
      discoTimer = 3 * 60; // 3 —Å–µ–∫—É–Ω–¥—ã
      player.isDancing = true;
    });

    // üé® –°–º–µ–Ω–∞ —Å–∫–∏–Ω–∞
    skinBtn.addEventListener('click', () => {
      player.skin = skins[Math.floor(Math.random() * skins.length)];
    });

    // üöÄ –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
    update();
  </script>
</body>
</html>
